version: '3'

env:
  BASE_PATH: "/{{ .TASKFILE_DIR }}/frontend"

tasks:
  bootstrap:
    internal: true
    cmd: . script/bootstrap
    sources:
      - "{{ .BASE_PATH }}/yarn.lock"
    generates:
      - "{{ .BASE_PATH }}/.yarn/*"
    dir: frontend
  start:
    desc: "Starts the frontend application."
    deps: [bootstrap]
    cmd: yarn start
    dir: frontend
  build:
    desc: "Build the app."
    deps: [bootstrap]
    cmd: yarn build
    dir: frontend
  test:
    desc: "Runs the frontend test suite."
    deps: [bootstrap]
    cmd: yarn test {{ .CLI_ARGS }}
    dir: frontend
  lint:
    desc: "Checks lint and formatting."
    deps: [bootstrap]
    cmd: yarn lint
    dir: frontend
  lintfix:
    desc: "Fixes lint and formatting."
    deps: [bootstrap]
    cmd: yarn lint:fix
    dir: frontend
  typecheck:
    desc: "Validates types."
    deps: [bootstrap]
    cmd: yarn typecheck
    dir: frontend
